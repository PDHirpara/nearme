import 'dart:async';import 'package:flutter/material.dart';import 'package:google_fonts/google_fonts.dart';import 'package:shared_preferences/shared_preferences.dart';// import 'package:jwt_decoder/jwt_decoder.dart';import 'home_screen.dart';import 'intro_screen.dart';import 'login_screen.dart';class SplashScreen extends StatefulWidget {  const SplashScreen({super.key});  @override  State<SplashScreen> createState() => _SplashScreenState();}class _SplashScreenState extends State<SplashScreen> {  var token;  bool logIn = false;  Future<bool> isLogIn() async {    SharedPreferences pref = await SharedPreferences.getInstance();    token = pref.getString('token')!;    if (token == null) {      // print('token is null');      return logIn = false;    }    // print('token = $token');    // if (JwtDecoder.isExpired(token) ) {    //   print('token is expired');    //   return logIn = false;    // }    // print('token is there');    return logIn = true;  }  @override  void initState() {    super.initState();    // print('initialize called');    _initializeApp();  }  Future<void> _initializeApp() async {    // print('login called');    await isLogIn();    await Future.delayed(const Duration(seconds: 2), () {      // print('Navigate called');      _navigateToNextScreen();    });  }  void _navigateToNextScreen() async {    SharedPreferences preferences = await SharedPreferences.getInstance();    bool isIntroVisited = preferences.getBool("isIntroVisited") ?? false;    Navigator.of(context).pushReplacement(MaterialPageRoute(builder: (ctx) {      Widget page;      if (isIntroVisited) {        if (logIn) {          page = const HomeScreen();        } else {          page = const LoginScreen();        }      } else {        page = const IntroScreen();      }      return page;    }));  }  @override  Widget build(BuildContext context) {    double h = MediaQuery.of(context).size.height;    double w = MediaQuery.of(context).size.width;    return Scaffold(      body: Center(        child: Column(          mainAxisAlignment: MainAxisAlignment.center,          children: [            Container(              height: h * 0.1572,              width: w * 0.4916,              decoration: const BoxDecoration(                image: DecorationImage(                  image: AssetImage(                    'Assets/logo/Icon/nearme_logo.png',                  ),                ),              ),            ),            const SizedBox(              height: 20,            ),            Text(              "Near Me",              style: GoogleFonts.alatsi(                textStyle: const TextStyle(                  color: Color.fromRGBO(48, 47, 47, 1),                  fontSize: 32,                ),              ),            ),          ],        ),      ),    );  }  @override  void dispose() {    super.dispose();  }}